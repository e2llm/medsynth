"""ar_EG facility definitions and field-name mappings."""

FACILITIES = [
    {
        "id": "nile",
        "name": "مستشفى النيل المركزي",
        "doc_types": ["discharge", "lab", "referral"],
        "source": {
            "discharge": "digital",
            "lab": "digital",
            "referral": "ocr",
        },
        "date_format": "%d/%m/%Y",
        "id_type": "string",
        "age_format": "integer",
    },
    {
        "id": "delta",
        "name": "مستشفى الدلتا الجامعي",
        "doc_types": ["discharge", "visit", "referral"],
        "source": {
            "discharge": "ocr",
            "visit": "ocr",
            "referral": "ocr",
        },
        "date_format": "%d/%m/%Y",
        "id_type": "string",
        "age_format": "integer",
    },
    {
        "id": "almokhtabar",
        "name": "معامل المختبر",
        "doc_types": ["lab"],
        "source": {
            "lab": "digital",
        },
        "date_format": "%d.%m.%Y",
        "id_type": "string",
        "age_format": "integer",
    },
    {
        "id": "tahrir",
        "name": "مركز التحرير الطبي",
        "doc_types": ["visit", "discharge", "referral"],
        "source": {
            "visit": "ocr",
            "discharge": "ocr",
            "referral": "ocr",
        },
        "date_format": "%Y-%m",
        "id_type": "int",
        "age_format": "range",
    },
]

FACILITY_BY_ID = {f["id"]: f for f in FACILITIES}

# Field-name mapping per facility (concept -> actual field name)
FIELD_NAMES = {
    "nile": {
        "patient_id":      "patient_id",
        "patient_name":    "patient_name",
        "age":             "patient_age",
        "gender":          "gender",
        "date":            "document_date",
        "department":      "department",
        "diagnosis":       "primary_diagnosis",
        "icd10":           "icd10_code",
        "conditions":      "conditions",
        "medications":     "medications",
        "smoking":         "smoking_status",
        "blood_type":      "blood_type",
        "occupation":      "occupation",
        "facility":        "facility_name",
        "free_text":       "clinical_notes",
        "address":         "patient_address",
        "lab_test_name":   "test_name",
        "lab_value":       "test_value",
        "lab_unit":        "test_unit",
        "lab_reference":   "reference_range",
        "lab_flag":        "result_flag",
        "referral_to":     "referred_to_department",
        "referral_reason": "referral_reason",
        "urgency":         "urgency_level",
    },
    "delta": {
        "patient_id":      "الرقم_القومي",
        "patient_name":    "اسم_المريض",
        "age":             "السن",
        "gender":          "النوع",
        "date":            "التاريخ",
        "department":      "القسم",
        "diagnosis":       "التشخيص",
        "icd10":           "كود_التشخيص",
        "conditions":      "الأمراض_المزمنة",
        "medications":     "الأدوية",
        "smoking":         "التدخين",
        "blood_type":      "فصيلة_الدم",
        "occupation":      "المهنة",
        "facility":        "المستشفى",
        "free_text":       "الملخص_الطبي",
        "address":         "العنوان",
        "referral_to":     "الإحالة_إلى",
        "referral_reason": "سبب_الإحالة",
        "urgency":         "الأولوية",
    },
    "almokhtabar": {
        "patient_id":      "patient_id",
        "patient_name":    "name",
        "age":             "age",
        "gender":          "sex",
        "date":            "collection_date",
        "facility":        "lab_name",
        "free_text":       "notes",
        "lab_test_name":   "test",
        "lab_value":       "result",
        "lab_unit":        "units",
        "lab_reference":   "ref_range",
        "lab_flag":        "flag",
        "smoking":         None,
        "blood_type":      None,
        "occupation":      None,
        "conditions":      None,
        "medications":     None,
        "address":         None,
    },
    "tahrir": {
        "patient_id":      "raqam",
        "patient_name":    "ism",
        "age":             "sen",
        "gender":          "noa",
        "date":            "tarikh",
        "department":      "qism",
        "diagnosis":       "tashkhis",
        "icd10":           "kod",
        "conditions":      "amrad",
        "medications":     "adwiya",
        "smoking":         "tadkhin",
        "facility":        "markaz",
        "free_text":       "nass",
        "address":         "unwan",
        "referral_to":     "ihala_ila",
        "referral_reason": "sabab_ihala",
        "urgency":         "awlawiya",
    },
}
