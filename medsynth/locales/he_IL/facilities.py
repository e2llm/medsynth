"""he_IL facility definitions and field-name mappings."""

FACILITIES = [
    {
        "id": "alon",
        "name": "בית חולים האלון",
        "doc_types": ["discharge", "lab", "referral"],
        "source": {
            "discharge": "digital",
            "lab": "digital",
            "referral": "digital",
        },
        "date_format": "%Y-%m-%d",
        "id_type": "string",
        "age_format": "integer",
    },
    {
        "id": "hadarim",
        "name": "מרכז רפואי הדרים",
        "doc_types": ["discharge", "visit", "referral"],
        "source": {
            "discharge": "ocr",
            "visit": "digital",
            "referral": "ocr",
        },
        "date_format": "%d/%m/%Y",
        "id_type": "int",
        "age_format": "integer",
    },
    {
        "id": "ofek",
        "name": "מעבדות אופק",
        "doc_types": ["lab"],
        "source": {
            "lab": "digital",
        },
        "date_format": "%d.%m.%y",
        "id_type": "string",
        "age_format": "integer",
    },
    {
        "id": "shaked",
        "name": "מרפאות שקד",
        "doc_types": ["visit", "discharge", "referral"],
        "source": {
            "visit": "ocr",
            "discharge": "ocr",
            "referral": "ocr",
        },
        "date_format": "%Y-%m",
        "id_type": "float",
        "age_format": "range",
    },
]

FACILITY_BY_ID = {f["id"]: f for f in FACILITIES}

# Field-name mapping per facility (concept → actual field name)
FIELD_NAMES = {
    "alon": {
        "patient_id":    "patient_id",
        "patient_name":  "patient_name",
        "age":           "patient_age",
        "gender":        "gender",
        "date":          "document_date",
        "department":    "department",
        "diagnosis":     "primary_diagnosis",
        "icd10":         "icd10_code",
        "conditions":    "conditions",
        "medications":   "medications",
        "smoking":       "smoking_status",
        "blood_type":    "blood_type",
        "occupation":    "occupation",
        "facility":      "facility_name",
        "free_text":     "clinical_notes",
        "address":       "patient_address",
        "lab_test_name": "test_name",
        "lab_value":     "test_value",
        "lab_unit":      "test_unit",
        "lab_reference": "reference_range",
        "lab_flag":      "result_flag",
        "referral_to":   "referred_to_department",
        "referral_reason": "referral_reason",
        "urgency":       "urgency_level",
    },
    "hadarim": {
        "patient_id":    "מספר_זהות",
        "patient_name":  "שם_מטופל",
        "age":           "גיל",
        "gender":        "מין",
        "date":          "תאריך",
        "department":    "מחלקה",
        "diagnosis":     "אבחנה_ראשית",
        "icd10":         "קוד_אבחנה",
        "conditions":    "מחלות_רקע",
        "medications":   "תרופות",
        "smoking":       None,
        "blood_type":    "סוג_דם",
        "occupation":    None,
        "facility":      "מוסד_רפואי",
        "free_text":     "סיכום_רפואי",
        "address":       "כתובת",
        "referral_to":   "הפניה_למחלקה",
        "referral_reason": "סיבת_הפניה",
        "urgency":       "דחיפות",
    },
    "ofek": {
        "patient_id":    "patient_id",
        "patient_name":  "name",
        "age":           "age",
        "gender":        "sex",
        "date":          "collection_date",
        "facility":      "lab_name",
        "free_text":     "notes",
        "lab_test_name": "test",
        "lab_value":     "result",
        "lab_unit":      "units",
        "lab_reference": "ref_range",
        "lab_flag":      "flag",
        "smoking":       None,
        "blood_type":    None,
        "occupation":    None,
        "conditions":    None,
        "medications":   None,
        "address":       None,
    },
    "shaked": {
        "patient_id":    "tz",
        "patient_name":  "shem",
        "age":           "age_group",
        "gender":        "min",
        "date":          "taarich",
        "department":    "yechida",
        "diagnosis":     "diagnosis",
        "icd10":         "code",
        "conditions":    "background",
        "medications":   "drugs",
        "smoking":       "smoking",
        "blood_type":    None,
        "occupation":    "job",
        "facility":      "clinic",
        "free_text":     "text",
        "address":       "addr",
        "referral_to":   "ref_dept",
        "referral_reason": "ref_reason",
        "urgency":       "priority",
    },
}
